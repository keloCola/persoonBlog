---
title: 面向对象
date: 2021-07-24 02:50:52
permalink: /pages/3e6575/
categories:
  - 体系课程
  - js设计模式
tags:
  - 
---
# 第2章 面向对象

讲解javascript中的面向对象的概念，包括 ES6 class 语法、UML 类图、以及面向对象三要素

![image-20210724032338455](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724032338.png)

<!-- more -->
![image-20210723234421034](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210723234421.png)


## 2-1~~~2-4  搭建开发环境

![image-20210723234445769](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210723234445.png)

### 安装node 以及 npm 

````
// 查看是否安装
node -v
npm -v
````

![image-20210723234644168](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210723234644.png)

### 初始化环境

```
//在文件夹中
npm init
//之后一路回车
//成成package.json文件夹
```

![image-20210723234908443](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210723234908.png)

### 创建文件

![image-20210723235019721](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210723235019.png)

### 安装webpack并config创建文件

````
npm install webpack webpack-cli  --save-dev
````

`webpack.dev.config.js`

```js
module.exports = {
    entry: './src/index.js',//入口文件
    output: {
        path: __dirname,//当前路径
        filename: "./release/bundle.js"//release 会自动创建
    }
}
```

::: tip

教程中的版本配置如下

```js
{
  "name": "es6",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "webpack-dev-server --config ./webpack.dev.config.js --mode development"
  },
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "babel-core": "^6.26.3",
    "babel-loader": "^7.1.4",
    "babel-plugin-transform-decorators-legacy": "^1.3.4",
    "babel-polyfill": "^6.26.0",
    "babel-preset-es2015": "^6.24.1",
    "babel-preset-latest": "^6.24.1",
    "html-webpack-plugin": "^3.2.0",
    "webpack": "^4.8.3",
    "webpack-cli": "^2.1.3",
    "webpack-dev-server": "^3.1.4"
  },
  "dependencies": {
    "javascript-state-machine": "^3.0.1",
    "jquery": "^3.3.1"
  }
}
```



过高的版本会报错

请自行替换包或者命令进行解决

::::

### 在package.json文件中添加dev启动项

```js
  "scripts": {
    "dev": "webpack --config ./webpack.dev.config.js --mode development"
  },
```

### 安装一些依赖

````
npm install webpack-dev-server html-webpack-plugin --save-dev
````

### 创建index文件

![image-20210724002506625](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724002506.png)



### 修改webpack配置

```js
//webpack.dev.config.js
const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')
module.exports = {
    entry: './src/index.js',//入口文件
    output: {
        path: __dirname,//当前路径
        filename: './release/bundle.js'  // release 会自动创建
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: './index.html'  // bundle.js 会自动注入
        })
    ],
    devServer: {
        contentBase: path.join(__dirname, "./release"),  // 根目录 本地开发
        open: true,  // 自动打开浏览器
        port: 9000,   // 端口
        proxy: {
            '/api/*': {
                target: 'http://localhost:8880'
            }
        }
    },
}
```

```js
//package.json  
  "scripts": {
    "dev": "webpack-dev-server --config ./webpack.dev.config.js --mode development"
  },
```

### 解析es6

- 安装各种依赖

```
npm install babel-core babel-loader babel-polyfill babel-preset-es2015 babel-preset-latest --save-dev
```

- 创建`.babelrc`

```js
{
    "presets": ["es2015", "latest"],
    "plugins": []
}
```

- 修改webpack配置 增加模块

```js
//webpack.dev.config.js

module.exports = {
...
    module: {
        rules: [{
            test: /\.js?$/,
            exclude: /(node_modules)/,//略过
            loader: 'babel-loader'//进行babel处理
        }]
    },
    plugins: [
      ...
    ],
    devServer: {
      ...
    },
}
```

## 2-5 什么是面向对象

![image-20210724003417906](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724003417.png)

 ![image-20210724004108117](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724004108.png)

### 概念-类

```js
//类 就是 模板
class People {
    constructor(name,age){
        this.name = name //属性
        this.age = age
    }
    eat(){
        alert(`${this.name}` eat something)
    }
}
```

### 概念-对象（实例）

````js
//创建实例
let zhangsan = new People('zhangsan',20)
zhangsan.eat()
````

````js
class People {
    constructor(name, age) {
        this.name = name
        this.age = age
    }
    eat() {
        alert(`${this.name} eat something`)
    }
    speak() {
        alert(`My name is ${this.name}, age ${this.age}`)
    }
}

let zhang = new People('zhang', 20)
zhang.eat()
zhang.speak()

let wang = new People('wang', 21)
wang.eat()
wang.speak()
````

## 2-6 面向对象-继承

![image-20210724005825218](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724005825.png)

```js
//父类
class People {
    constructor(name, age) {
        this.name = name
        this.age = age
    }
    eat() {
        alert(`${this.name} eat something`)
    }
    speak() {
        alert(`My name is ${this.name}, age ${this.age}`)
    }
}
//子类继承父类
class Student extends People {
    constructor(name, age, number) {
        super(name, age)
        this.number = number
    }
    study() {
        alert(`${this.name} study`)
    }
}

let xiaoming = new Student('xiaoming', 10, 'A1')
xiaoming.study()
console.log(xiaoming.number)
let xiaohong = new Student('xiaohong', 11, 'A2')
xiaohong.study()
```

## 2-7 面向对象-封装

![image-20210724005933740](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724005933.png)

```typescript {5,21}
// 父类
class People {
  name
  age
  protected weight //定义 protected属性 对子类公开
  constructor(name,age) {
    this.name = name
    this.age = age
    this.weight = 120
  }
  eat() {
    alert(`${this.name} eat something`)
  }
  speak() {
    alert(`My name is ${this.name}, age ${this.age}`)
  }
}
// 子类
class Student extends People {
  number
  private girlfriend //定义 private属性 私有的
  constructor(name,age,number) {
    super(name,age)
    this.number = number
    this.girlfriend = 'xiaofang'
  }
  study() {
    alert(`${this.name} study`)
  }
  getWeight() {
    alert(`${this.weight} `)
  }
}
```

````js
// 实例
let xiaoming = new Student('xiaoming',10,'A')
xiaoming.getWeight()//120
//xiaoming.weight//属性“weight”受保护，只能在类“People”及其子类中访问。ts(2445)
console.log(xiaoming.girlfriend);//编译时会报错，直接编译不通过
````

![image-20210724011517324](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724011517.png)



![image-20210724011849649](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724011849.png)

## 2-8 面向对象-多态

![image-20210724011920665](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724011920.png)

```js
class People {
  constructor(name) {
      this.name = name
  }
  saySomething() {

  }
}
class A extends People {
  constructor(name) {
      super(name)
  }
  saySomething() {
      alert('I am A')
  }
}
class B extends People {
  constructor(name) {
      super(name)
  }
  saySomething() {
      alert('I am B')
  }
}
let a = new A('a')
a.saySomething()
let b = new B('b')
b.saySomething()
```

![image-20210724012247560](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724012247.png)

## 2-9 面向对象-应用举例

- jQuery就是一个class
- `$('p')`是jQuery的一个实例
::: details
```js {28-29}
class jQuery {
  constructor(selector) {
    // 获取数组slice
      let slice = Array.prototype.slice
      // 获取DOm节点
      let dom = slice.call(document.querySelectorAll(selector))
      // 获取数组长度
      let len = dom ? dom.length : 0
      // 常规操作
      for (let i = 0; i < len; i++) {
          this[i] = dom[i]
      }
      this.length = len
      this.selector = selector || ''
  }
  append(node) {

  }
  addClass(name) {

  }
  html(data) {

  }
  // 此处省略若干 API
}
window.$ = function (selector) {
    //工厂模式
  return new jQuery(selector)
}
// 使用
  var $p = $('p')
  console.log($p);
```
:::
![image-20210724013328416](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724013328.png)



## 2-10 面向对象-总结

### 为什么要使用面向对象

![image-20210724013805903](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724013805.png)

### 总结

![image-20210724013852257](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724013852.png)

## 2-11 UML类图1-介绍

![image-20210724013956755](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724013956.png)

### 推荐工具

- MS Office Visio
- https://www.processon.com/

### 类图

![image-20210724014157857](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724014157.png)

### 例子

![image-20210724014328685](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724014328.png)

## 2-12 UML类图2-关系

- `泛化`，表示继承
- `关联`，表示引用

![image-20210724014549609](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724014549.png)

自己试下

![image-20210724015357307](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724015357.png)

::: details

![image-20210724014820752](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724014820.png)


:::

## 2-13 总结

![image-20210724015517193](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724015517.png)
