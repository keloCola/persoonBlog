---
title: 工厂模式
date: 2021-07-25 23:04:54
permalink: /pages/4697c1/
categories:
  - 体系课程
  - js设计模式
tags:
  - 
---
# 第4章 工厂模式

工厂模式是我们最常用的实例化对象模式，本章介绍工厂模式的基本概念，以快餐店汉堡作为生活实例加深理解，讲解并绘制了UML类图，最后列举了JS中的常见使用场景，如 jquery中的$，React.createElement，vue 异步组件等
<!-- more -->
## 4-1 工厂模式

![image-20210724201806215](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724201806.png)

### 工厂模式介绍

- 将new操作单独封装
- 遇到new，就要考虑是否该使用工厂模式
- `传入一个参数--->返回一个实例`

### 实例

- 去买汉堡，直接点餐、取餐，不用自己亲手做
- 商店要“封装” 做汉堡的工作，最好了直接给买着

## 工厂模式UML类图

![image-20210724202131101](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724202131.png)

::: details 看看你会不会话简化版本的

![image-20210724202404845](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724202404.png)

:::

## 工厂模式代码

```js
class Product{
  constructor(name){
    this.name = name
  }
  init(){
    alert('init')
  }
  fun1(){
    alert('fun1')
  }
  fun2(){
    alert('fun2')
  }
}

class Creator{
  constructor(){

  }
  create(name){
    return new Product(name) // 生成一个实例
  }
}

// 测试
// 先生成一个实例
let creator = new Creator()
let p = creator.create('I`m p')
p.init()//init
p.fun1()//fun1
```





## 工厂模式应用场景

![image-20210724203611281](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724203611.png)

### jQuery

![image-20210724203809118](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724203809.png)

::: details jQuery代码



```js
class jQuery {
  constructor(selector) {
    // 获取数组slice
      let slice = Array.prototype.slice
      // 获取DOm节点
      let dom = slice.call(document.querySelectorAll(selector))
      // 获取数组长度
      let len = dom ? dom.length : 0
      // 常规操作
      for (let i = 0; i < len; i++) {
          this[i] = dom[i]
      }
      this.length = len
      this.selector = selector || ''
  }
  append(node) {

  }
  addClass(name) {

  }
  html(data) {

  }
  // 此处省略若干 API
}
window.$ = function (selector) {
  return new jQuery(selector)
}
```

:::


### React

![image-20210724204141901](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724204142.png)

![image-20210724204318484](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724204318.png)

![image-20210724204252411](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724204252.png)

### vue

![image-20210724204419739](https://gitee.com/sheep101/typora-img-save/raw/master/img/20210724204419.png)

## 设计原则验证

- 构造函数和创建者分离
- 符合开放封闭原则

