---
title: 闭包
date: 2021-07-23 13:31:02
permalink: /pages/595066/
categories:
  - 前端
  - JavaScript文章
tags:
  - 
---
- 闭包就是能够读取其他函数内部变量的函数

- 可以把闭包简单理解成"定义在一个函数内部的函数"

- 在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁

- 函数作为返回值

- 函数作为参数传递
<!-- more -->
###  包是啥

闭包就是`能够读取其他函数内部变量的函数`，说白了闭包就是个函数，只不过是处于其他函数内部而已。

由于在javascript中，只有函数内部的子函数才能读取局部变量，所以说，闭包可以简单理解成“`定义在一个函数内部的函数`“。

所以，在本质上，闭包是`·将函数内部和函数外部连接起来的桥梁·`。

闭包是指在 JavaScript 中，内部函数总是可以访问其所在的外部函数中声明的参数和变量，即使在其外部函数被返回（寿命终结）了之后

### 应用场景

闭包随处可见，一个 Ajax 请求的成功回调，一个事件绑定的回调方法，一个 setTimeout 的延时回调，或者一个函数内部返回另一个匿名函数，这些都是闭包。简而言之，无论使用何种方式对函数类型的值进行传递，当函数在别处被调用时，都有闭包的身影 
- ajax
- settimeout
- 节流防抖

###  使用闭包应该注意的

由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。

 解决方法是，在退出函数之前，将不使用的局部变量全部删除。

闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。

### 实际开发中闭包的应用

-  隐藏数据

-  如做一个简单的cache工具

```js
// 闭包隐藏数据，只提供 API
function createCache() {
    const data = {} // 闭包中的数据，被隐藏，不被外界访问
    return {
        set: function (key, val) {
            data[key] = val
        },
        get: function (key) {
            return data[key]
        }
    }
}

const c = createCache()
c.set('a', 100)
console.log( c.get('a') )

```

